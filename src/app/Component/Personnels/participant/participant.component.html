<div class="p-8 bg-gray-50 min-h-screen">
  <!-- Titre de la page -->
  <h1 class="text-3xl font-bold text-orange-600 mb-8">
    Gestion des Participants
  </h1>

  <!-- Section des filtres -->
  <div class="bg-white rounded-lg shadow p-6 mb-8">
    <h2 class="text-xl font-semibold text-gray-800 mb-4">Filtres</h2>
    <div class="grid grid-cols-1 md:grid-cols-4 gap-4">
      <!-- Recherche par nom ou prénom -->
      <div>
        <label class="block text-sm font-medium text-gray-700 mb-1">Recherche</label>
        <input
          type="text"
          [(ngModel)]="searchTerm"
          placeholder="Nom ou Prénom"
          class="w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-orange-500"
        />
      </div>

      <!-- Filtre par activité -->
      <div>
        <label class="block text-sm font-medium text-gray-700 mb-1">Activité</label>
        <select
          [(ngModel)]="searchActivite"
          (change)="onActiviteChange()"
          class="w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-orange-500"
        >
          <option value="">Toutes les activités</option>
          <option *ngFor="let activite of activites" [value]="activite.id">
            {{ activite.nom }}
          </option>
        </select>
      </div>

      <!-- Filtre par étape -->
      <div>
        <label class="block text-sm font-medium text-gray-700 mb-1">Étape</label>
        <select
          [(ngModel)]="searchEtape"
          (change)="onEtapeChange()"
          class="w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-orange-500"
        >
          <option value="">Toutes les étapes</option>
          <option *ngFor="let etape of filteredEtapes" [value]="etape.nom">
            {{ etape.nom }}
          </option>
        </select>
      </div>

      <!-- Filtre par liste (affiché uniquement si une étape est sélectionnée) -->
      <div *ngIf="isEtapeSelected">
        <label class="block text-sm font-medium text-gray-700 mb-1">Liste</label>
        <select
          [(ngModel)]="searchListType"
          class="w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-orange-500"
        >
          <option value="">Toutes les listes</option>
          <option value="listeDebut">Liste Début</option>
          <option value="listeResultat">Liste Résultat</option>
        </select>
      </div>
    </div>
  </div>

  <!-- Table des participants -->
  <div *ngIf="isTableVisible" class="bg-white rounded-lg shadow overflow-hidden">
    <table class="min-w-full divide-y divide-gray-200">
      <thead class="bg-orange-500">
      <tr>
        <th class="px-6 py-3 text-left text-xs font-medium text-white uppercase tracking-wider">
          Nom
        </th>
        <th class="px-6 py-3 text-left text-xs font-medium text-white uppercase tracking-wider">
          Prénom
        </th>
        <th class="px-6 py-3 text-left text-xs font-medium text-white uppercase tracking-wider">
          Email
        </th>
        <th class="px-6 py-3 text-left text-xs font-medium text-white uppercase tracking-wider">
          Téléphone
        </th>
        <th class="px-6 py-3 text-left text-xs font-medium text-white uppercase tracking-wider">
          Genre
        </th>
        <th class="px-6 py-3 text-left text-xs font-medium text-white uppercase tracking-wider">
          Activité
        </th>
        <th class="px-6 py-3 text-left text-xs font-medium text-white uppercase tracking-wider">
          Check-in
        </th>
      </tr>
      </thead>
      <tbody class="bg-white divide-y divide-gray-200">
      <tr
        *ngFor="let participant of paginatedParticipants"
        [ngClass]="{ 'bg-red-100': participant.isBlacklisted }"
        class="hover:bg-gray-50"
      >
        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-800">
          {{ participant.nom }}
        </td>
        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-800">
          {{ participant.prenom }}
        </td>
        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-800">
          {{ participant.email }}
        </td>
        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-800">
          {{ participant.phone }}
        </td>
        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-800">
          {{ participant.genre }}
        </td>
        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-800">
          {{ participant.activite?.nom }}
        </td>
        <td class="px-6 py-4 whitespace-nowrap text-center">
          <input
            type="checkbox"
            (change)="onCheckInChange(participant, $event)"
            [checked]="participant.checkedIn"
            [disabled]="participant.checkedIn"
            class="h-4 w-4 text-orange-600 focus:ring-orange-500 border-gray-300 rounded"
          />
        </td>
      </tr>
      </tbody>
    </table>

    <!-- Pagination -->
    <div class="flex justify-between items-center px-6 py-3 bg-gray-50">
      <div class="text-sm text-gray-700">
        Page {{ currentPage }} sur {{ totalPages }}
      </div>
      <div class="flex space-x-2">
        <button
          (click)="prevPage()"
          [disabled]="currentPage === 1"
          class="px-3 py-1 bg-orange-500 text-white rounded disabled:opacity-50"
        >
          Précédent
        </button>
        <button
          (click)="nextPage()"
          [disabled]="currentPage === totalPages"
          class="px-3 py-1 bg-orange-500 text-white rounded disabled:opacity-50"
        >
          Suivant
        </button>
      </div>
    </div>
  </div>

  <!-- Message si aucune donnée -->
  <div *ngIf="participants && participants.length === 0" class="text-center mt-4">
    <p>Aucune donnée disponible pour le moment.</p>
  </div>
</div>
